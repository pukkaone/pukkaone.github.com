<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-7747045-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-7747045-3');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Getting Started with GraphQL and Spring Boot</title>

  <link rel="shortcut icon" href="/favicon.ico">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!-- site style -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
  <link rel="stylesheet" href="/css/spring.css">
  <link rel="stylesheet" href="/css/site.css">
</head>
<body>
  <div class="container">
    <nav class="navbar navbar-light bg-light">
      <div class="container">
        <a class="navbar-brand" href="/">Software Developer's Notebook</a>
      </div>
    </nav>

    <div class="row">
      <div class="col">
        <article class="post">
  <header class="post-header">
    <p class="post-meta"><time class="date">2019-03-31</time></p>
    <h1 class="post-title">Getting Started with GraphQL and Spring Boot</h1>
  </header>

  <div class="post-content">
    <div class="paragraph">
<p>In 2019, I reinvented <a href="https://www.corba.org/">Common Object Request Brokerage Architecture (CORBA)</a>.
If you developed a distributed system in 1997, you might have built servers that accept network
requests by CORBA.
You defined the types and operations implemented by a server in Interface Definition Language (IDL).
An <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/idl/GShome.html">IDL compiler</a> generated
skeleton code for a server.
As an application developer, you added business logic to the skeleton code to complete the server
implementation.</p>
</div>
<div class="paragraph">
<p>I wrote <a href="https://pukkaone.github.io/grapid/">Grapid</a>, a framework for building
<a href="https://graphql.org/">GraphQL</a> servers in Java.
You define the types and operations implemented by a server in GraphQL schema definition language.
The framework generates code to connect GraphQL to Java types.
As an application developer, you only need to implement the business logic for the API.</p>
</div>
<div class="paragraph">
<p>This article explains how to build a GraphQL server in Java with Spring Boot.</p>
</div>
<div class="paragraph">
<p>At <a href="https://start.spring.io/">Spring Initializr</a>, generate a project with these options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven Project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.example.demo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Edit the <code>pom.xml</code> file, and add this Spring Boot starter which auto-configures a GraphQL server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
  &lt;groupId&gt;com.github.pukkaone&lt;/groupId&gt;
  &lt;artifactId&gt;grapid-web-spring-boot-starter&lt;/artifactId&gt;
  &lt;version&gt;0.3.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also add this Maven plugin which compiles GraphQL schema definition files to Java source files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
  &lt;groupId&gt;com.github.pukkaone&lt;/groupId&gt;
  &lt;artifactId&gt;grapid-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;0.3.0&lt;/version&gt;
  &lt;configuration&gt;
    &lt;packagePrefix&gt;com.example.demo.graphql&lt;/packagePrefix&gt; <i class="conum" data-value="1"></i><b>(1)</b>
  &lt;/configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;
        &lt;goal&gt;compile&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The compiler generates Java classes under this Java package.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The framework enforces a convention prescribing where you put GraphQL schema definition files and
Java classes.
Create resources directory <code>src/main/resources/graphql/v2018_12_31/</code>.
In this example, <code>v2018_12_31</code> identifies an API version.
An API version must be a valid Java identifier and not a Java keyword.</p>
</div>
<div class="paragraph">
<p>Add this GraphQL schema definition file in the directory.
By convention, GraphQL schema definition file names end with the extension <code>.graphql</code>.</p>
</div>
<div class="listingblock">
<div class="title">Author.graphql</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="graphql" class="language-graphql hljs">type Author {
  id: ID!
  name: String!
}

type Query {
  author(id: ID!): Author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The GraphQL schema defines the root object type Query.
The compiler appends the suffix <code>Resolver</code> to this root object type name to derive the Java class
name QueryResolver.
As an application developer, you must implement the QueryResolver class.
By convention, this class is in the Java package named <em>packagePrefix</em><code>.resolver</code> where
<em>packagePrefix</em> is the property configured in the Maven plugin.</p>
</div>
<div class="listingblock">
<div class="title">QueryResolver.java</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package com.example.demo.graphql.resolver;

import com.example.demo.graphql.v2018_12_31.type.Author; <i class="conum" data-value="1"></i><b>(1)</b>
import org.springframework.stereotype.Component;

@Component
public class QueryResolver {

  public Author author(String id) { <i class="conum" data-value="2"></i><b>(2)</b>
    return Author.builder()
        .id(id)
        .name("NAME")
        .build();
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The compiler generated the simple Java data class Author from the GraphQL object type Author.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The compiler translated this Java method signature from the field <code>author</code> of the GraphQL
root object type Query.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run the application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="sh" class="language-sh hljs">./mvnw spring-boot:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>In <a href="https://github.com/prisma/graphql-playground">GraphQL Playground</a>, connect to
<code><a href="http://localhost:8080/graphql/v2018_12_31" class="bare">http://localhost:8080/graphql/v2018_12_31</a></code> to send a GraphQL query to the server.</p>
</div>
  </div>
</article><footer>
  <h1>Recent Posts</h1>
  <ul class="posts">
  
    <li>
      <time class="date">2019-03-31</time>
      &nbsp; <a href="/2019/03/31/graphql-spring-boot-getting-started.html">Getting Started with GraphQL and Spring Boot</a>
  
    <li>
      <time class="date">2012-07-20</time>
      &nbsp; <a href="/2012/07/20/jsp-jersey-mvc-elresolver.html">Read Model Data In Jersey MVC JSP Templates Without "it."</a>
  
    <li>
      <time class="date">2011-01-03</time>
      &nbsp; <a href="/2011/01/03/jsp-cross-site-scripting-elresolver.html">ELResolver Escapes JSP EL Values To Prevent Cross-Site Scripting</a>
  
    <li>
      <time class="date">2010-12-22</time>
      &nbsp; <a href="/2010/12/22/jsp-precompile-application-start.html">Compile JSPs On Application Startup</a>
  
  </ul>

  <p><a href="/allposts.html">All Posts</a>
</footer>

      </div>
    </div>

    <div class="row">
      <div class="col">
        <div class="text-right">
          <small>
            Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> on
            <a href="https://pages.github.com">GitHub Pages</a>.
          </small>
        </div>
      </div>
    </div>
  </div>

  <!-- At end of document so the page can render while loading JavaScript. -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
